# ADR: Plataformas de Distribución — PWA-First

**ID**: ADR-0013
**Fecha**: 2026-02-16
**Estado**: ✅ Aceptado
**Autor**: Claude / Aritz

## 1. Contexto y Problema

OPTEK necesita estar disponible en móvil (Android + iOS), tablet y desktop. Con un solo desarrollador + IA, mantener múltiples codebases (web + React Native/Flutter) es inviable. Además, las tiendas de apps cobran 15-30% de comisión sobre compras in-app, lo que impactaría significativamente el margen del modelo "Progresión por Tema" (tema a 4.99€).

## 2. Opciones Consideradas

- **Opción A**: PWA (Progressive Web App) con Next.js — Un solo codebase web que se instala como app nativa. Sin comisión de stores. Deploy instantáneo via Vercel.
- **Opción B**: React Native — Apps nativas para iOS/Android + web separada. Mayor alcance en stores pero 3 codebases, 15-30% comisión, 2-7 días revisión por update.
- **Opción C**: Flutter — Similar a React Native pero con Dart. Excelente rendimiento nativo pero curva de aprendizaje nueva + 3 codebases.
- **Opción D**: Capacitor/Ionic — Wrapper de web app como nativa. Compromiso entre PWA y nativo, pero añade complejidad de stores sin beneficio real para nuestro caso de uso.

## 3. Decisión Elegida: PWA-First (Opción A)

**Justificación:**

1. **Un solo codebase**: Next.js sirve web, Android, iOS y desktop desde el mismo código. Crítico con 1 persona + IA.
2. **Sin Apple/Google tax**: Stripe directo cobra ~3% vs 15-30% de stores. En un tema a 4.99€, la store se llevaría 0.75-1.50€ (vs 0.15€ de Stripe).
3. **Deploy instantáneo**: Vercel deploy en segundos vs 2-7 días de revisión de App Store. Crítico para iterar rápido en MVP.
4. **SEO**: Google indexa la PWA, una app nativa no. El canal de adquisición principal (SEO + contenido) requiere indexación web.
5. **El 95% del uso es formularios + texto**: No necesita cámara, GPS, ni APIs nativas complejas. El micrófono (fase oral, post-MVP) es accesible via WebRTC.
6. **Chrome PWA en Android**: Experiencia prácticamente nativa (icono en home, pantalla completa, offline).

## 4. Consecuencias

- **Positivas**: Velocidad de desarrollo, margen económico, iteración rápida, SEO, sin dependencia de Apple/Google.
- **Negativas**: iOS Safari tiene limitaciones (push notifications solo desde iOS 16.4+, service worker limitado). Instalación requiere "Compartir → Añadir a inicio" (no tan intuitivo como "Descargar" de store).
- **Mitigación**: Tutorial visual in-app para instalación en iOS. Considerar TWA (Trusted Web Activity) para Google Play cuando >1000 usuarios.
