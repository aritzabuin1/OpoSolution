# ADR: Modelo de Pricing — "Progresión por Tema" (Ownership-First)

**ID**: ADR-0009
**Fecha**: 2026-02-15
**Estado**: ✅ Aceptado
**Autor**: Claude / Aritz
**Actualizado**: 2026-02-16 (v3 — rediseño completo basado en behavioral economics)

## 1. Contexto y Problema

OPTEK necesita un modelo de monetización que sea accesible para opositores (que suelen ser personas con presupuesto limitado estudiando a tiempo completo) pero que cubra los costes de Claude API y genere un negocio sostenible. Los opositores españoles son un mercado sensible al precio pero dispuesto a invertir en herramientas que les den ventaja competitiva.

**Contexto adicional (v3):** En España hay saturación de suscripciones (67% de suscriptores piden una sola app para gestionarlas todas). OpositaTest ya cobra 7.99-15.99€/mes con modelo subscription-only. Las academias cobran 60-250€/mes. El pricing de OPTEK debe ser un diferenciador competitivo en sí mismo, no solo un precio más bajo.

## 2. Opciones Consideradas

- **Opción A (v2)**: ~~Modelo híbrido con micro-compras~~ — Descartado. El test individual a 1.99€ canibaliza todo (Stripe se come 18% en fees), el corrector a 7.99€ está en "zona muerta" psicológica, y la suscripción a 14.99€ activa subscription fatigue.
- **Opción B**: Solo suscripción — Descartado. Mercado español saturado de suscripciones.
- **Opción C**: Solo compra individual — Descartado. No genera ingresos recurrentes.
- **Opción D**: Pay-per-use (tokens/créditos) — Descartado. Confuso para el usuario.
- **Opción E (v3)**: **Progresión por Tema (Ownership-First)** — Freemium generoso (5 tests + 2 correcciones) + compra por tema (4.99€ perpetuo) + pack oposición completa (29.99€ perpetuo) + suscripción premium solo para power users (12.99€/mes con rate limits). El opositor COMPRA temas como capítulos de un libro, no alquila acceso.

## 3. Decisión Elegida: Progresión por Tema — Ownership-First (Opción E)

**Filosofía: "No pagas por tiempo. Pagas por dominio."**

**Justificación con Behavioral Economics:**

1. **Anti-suscripción como diferenciador**: Mientras toda la competencia cobra mensualidades (OpositaTest, academias), OPTEK vende temas como propiedad perpetua. Esto ataca directamente la subscription fatigue del mercado español.
2. **Loss Aversion + Zeigarnik** (Kahneman & Tversky, 1979): El free tier muestra resultados pero bloquea explicaciones detalladas tras test 3 (blur CSS). El usuario VE que falló el Art. 14 pero NO puede acceder al porqué → tensión psicológica que impulsa la compra.
3. **Anchoring** (Tversky & Kahneman, 1974): El Pack Oposición a 29.99€ se muestra siempre junto a "Academia: desde 150€/mes" y "25 temas × 4.99€ = 124.75€". Parece ridículamente barato.
4. **Decoy Effect** (Huber, Payne & Puto, 1982): El Tema Individual a 4.99€ hace que el Pack a 29.99€ sea irresistible (>6 temas y el pack ya sale mejor).
5. **IKEA Effect + Goal Gradient** (Norton/Ariely 2012, Hull 1932): El opositor construye su progreso tema a tema ("75% del Tema 3 dominado"), lo siente suyo, y paga para completarlo.
6. **Endowment Effect** (Thaler, 1980): Los 5 tests gratis generan un mapa de fortalezas/debilidades que el usuario siente como propio. El paywall protege SU progreso.

**Estructura de pricing v3:**

| Tier | Precio | Tipo | Coste API | Margen | Qué incluye |
|------|--------|------|-----------|--------|-------------|
| **Free** | 0€ | — | ~0.20€ | N/A | 5 tests + 2 correcciones (nunca se resetean). Tests 1-3 completos, tests 4-5 con explicaciones borrosas |
| **Tema Individual** | 4.99€ | One-time perpetuo | ~1.20€ | ~76% | Tests ilimitados + corrector + flashcards de 1 tema. Para siempre |
| **Pack Oposición** | 29.99€ | One-time perpetuo | ~8.40€ | ~72% | TODOS los temas de 1 oposición. Para siempre. Con crédito de temas ya comprados |
| **Premium Mensual** | 12.99€/mes | Recurring | ~5-8€/mes | 40-60% | Todo + simulacros + stats comparativas. Rate limits: 20 tests/día, 5 correcciones/día, 2 simulacros/día |

> **Producto estrella:** Pack Oposición a 29.99€. A ~1.20€/tema vs 4.99€ individual. Ancla vs academia (1,800€/año). El 80% de conversiones pagadas deberían ir aquí.

**Flujo de conversión:**
```
Free (5 tests) → ve errores sin explicación → compra tema (4.99€)
→ construye progreso → compra 2-3 temas → paywall inteligente:
"Ya tienes 4 temas. Los 25 por 29.99€ (se descuenta lo pagado)"
→ Pack Oposición (29.99€ - crédito) → 5-10% upgraden a Premium (12.99€/mes)
```

## 4. Consecuencias (Trade-offs)

- **Positivas**: Diferenciación real vs competencia ("compra, no alquiles"), barrera de entrada 4.99€ (sin canibalization de micro-compras), márgenes saludables en todos los tiers, upsell natural tema→pack→premium, sistema de crédito que genera zero regret, simplicidad (3 productos Stripe vs 4 anteriores), acceso binario sin tracking de "usos restantes".
- **Negativas/Riesgos**: Sistema de crédito por temas comprados añade complejidad en checkout (Stripe coupons dinámicos). Pack a 29.99€ tiene riesgo si usuario hace 750+ tests (coste API = 30€) — mitigado: el 80% no completa todos los temas, rate limits aplican. Feature "explicaciones borrosas" requiere lógica frontend para blur/paywall. Revenue one-time no es recurrente — depende de flujo constante de nuevos usuarios (mitigado: Premium captura recurrencia de power users, y futuras oposiciones amplían mercado).

## 5. Notas de Implementación

- 3 productos en Stripe Dashboard: "Tema Individual" (4.99€ one-time), "Pack Oposición" (29.99€ one-time), "Premium Mensual" (12.99€/mes subscription).
- Tipo `ProductAccess`:
  ```typescript
  type ProductAccess =
    | { type: 'tema', temaId: string, purchasedAt: Date }
    | { type: 'pack_oposicion', oposicionId: string, purchasedAt: Date }
    | { type: 'subscription', status: 'active' | 'canceled' | 'past_due', currentPeriodEnd: Date }
  ```
- Función `getUserAccess(userId): Promise<ProductAccess[]>` que consulta `compras` + `subscriptions`.
- Lógica de acceso: suscripción activa → todo. Pack → todos los temas de esa oposición. Tema → solo ese tema. Free → 5 tests + 2 correcciones (explicaciones completas 1-3, borrosas 4-5).
- Tabla `compras`: `{ id, user_id, stripe_checkout_session_id, tipo, tema_id, oposicion_id, amount_paid, created_at }`.
- `profiles.free_tests_used` (default 0, max 5) + `profiles.free_corrector_used` (default 0, max 2).
- **Sistema de crédito**: al comprar pack, calcular `SUM(amount_paid) FROM compras WHERE tipo='tema' AND oposicion_id=X` y aplicar como descuento en Stripe Checkout (coupon dinámico o line_item ajustado).
- Rate limits Premium: 20 tests/día, 5 correcciones/día, 2 simulacros/día.
- Rate limits Pack/Tema: 10 tests/hora por tema, 5 correcciones/día por tema.
- Webhook `checkout.session.completed` → insertar en `compras`. Webhook `customer.subscription.deleted` → marcar cancelada.
- Stripe Customer Portal para gestión de suscripción Premium.
